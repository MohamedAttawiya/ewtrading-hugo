{{ define "main" }}
<section class="container">
  <header>
    <h1>{{ .Title }}</h1>
    {{ with .Params.description }}<p>{{ . }}</p>{{ end }}
  </header>

  {{ $articles := site.GetPage "insights/articles" }}
  {{ if not $articles }}
    <p>No articles yet.</p>
  {{ else }}
    {{ $pages := where $articles.RegularPages "Draft" "ne" true }}

    {{ if gt (len $pages) 0 }}
      {{ $paginator := .Paginate $pages }}

      <div class="cards">
        {{ range $paginator.Pages }}
          <article class="card">
            <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
            {{ with .Params.summary }}<p>{{ . }}</p>{{ end }}
            <p class="meta">{{ .Date.Format "02 Jan 2006" }}</p>
          </article>
        {{ end }}
      </div>

{{ partial "pagination.html" . }}

    {{ else }}
      <p>No articles yet.</p>
    {{ end }}
  {{ end }}
</section>
{{ end }}
